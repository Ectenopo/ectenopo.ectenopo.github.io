<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE CONSTRUCT // V2.0</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: black;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
            color: #0F0; /* Default Green */
        }

        /* Matrix Rain Canvas */
        #matrix-canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            opacity: 0.4; /* Dimmed slightly so text is readable */
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 10;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Command Interface */
        .terminal {
            width: 70%;
            max-width: 900px;
            height: 60vh;
            background: rgba(0, 10, 0, 0.95);
            border: 1px solid currentColor;
            padding: 20px;
            box-shadow: 0 0 30px currentColor;
            display: flex;
            flex-direction: column;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .header-bar {
            border-bottom: 1px solid currentColor;
            padding-bottom: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
        }

        .output-log {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            font-size: 15px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Custom Scrollbar */
        .output-log::-webkit-scrollbar { width: 8px; }
        .output-log::-webkit-scrollbar-track { background: rgba(0,0,0,0.5); }
        .output-log::-webkit-scrollbar-thumb { background: currentColor; border-radius: 4px; }

        .input-line {
            display: flex;
            align-items: center;
            background: rgba(0,0,0,0.5);
            padding: 5px;
        }

        .prompt {
            margin-right: 10px;
            font-weight: bold;
        }

        input[type="text"] {
            flex-grow: 1;
            background: transparent;
            border: none;
            color: inherit;
            font-family: inherit;
            font-size: 16px;
            outline: none;
        }

        /* Utility Classes for Colors */
        .color-green { color: #0F0; border-color: #0F0; box-shadow: 0 0 30px #0F0; }
        .color-red { color: #F00; border-color: #F00; box-shadow: 0 0 30px #F00; }
        .color-blue { color: #00F; border-color: #00F; box-shadow: 0 0 30px #00F; }
        .color-white { color: #FFF; border-color: #FFF; box-shadow: 0 0 30px #FFF; }
        .color-gold { color: #FFD700; border-color: #FFD700; box-shadow: 0 0 30px #FFD700; }

        .cmd-success { color: inherit; opacity: 1; }
        .cmd-error { color: #FF4444; font-weight: bold; }
        .cmd-info { opacity: 0.8; font-style: italic; }

    </style>
</head>
<body class="color-green">

    <canvas id="matrix-canvas"></canvas>

    <div class="container">
        <div id="terminal-window" class="terminal">
            <div class="header-bar">
                <span>Construct Access Terminal</span>
                <span id="clock">00:00:00</span>
            </div>
            <div id="log" class="output-log">Initializing connection...
Connected.
Type 'help' to view the database of commands.
</div>
            <div class="input-line">
                <span class="prompt">User@Root:~$</span>
                <input type="text" id="cmdInput" placeholder="Enter command..." autocomplete="off" autofocus>
            </div>
        </div>
    </div>

    <script>
        // --- 1. MATRIX VISUALS ---
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const letters = "0101010101XYZA";
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Text color is based on current theme, but we query the body color
            const style = getComputedStyle(document.body);
            ctx.fillStyle = style.color; 
            ctx.font = fontSize + "px monospace";

            for (let i = 0; i < drops.length; i++) {
                const text = letters.charAt(Math.floor(Math.random() * letters.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 33);
        window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };

        // --- 2. CLOCK UTILITY ---
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString();
        }, 1000);

        // --- 3. COMMAND LOGIC ---
        const logDisplay = document.getElementById('log');
        const cmdInput = document.getElementById('cmdInput');
        const terminalBody = document.body;

        function printLog(text, type = "cmd-success") {
            const div = document.createElement('div');
            div.className = type;
            div.textContent = `> ${text}`;
            logDisplay.appendChild(div);
            logDisplay.scrollTop = logDisplay.scrollHeight;
        }

        // --- URL PATTERNS FOR 100+ COMMANDS ---
        // Format: { CommandName: URL_Template }
        // %s is replaced by the query
        const urlCommands = {
            // Google Suite
            "google:search": "https://www.google.com/search?q=%s",
            "google:images": "https://www.google.com/search?tbm=isch&q=%s",
            "google:maps": "https://www.google.com/maps?q=%s",
            "google:news": "https://www.google.com/search?tbm=nws&q=%s",
            "google:translate": "https://translate.google.com/?text=%s",
            "google:scholar": "https://scholar.google.com/scholar?q=%s",
            "google:finance": "https://www.google.com/finance/quote/%s",
            
            // Video & Audio
            "youtube:search": "https://www.youtube.com/results?search_query=%s",
            "twitch:search": "https://www.twitch.tv/search?term=%s",
            "spotify:search": "https://open.spotify.com/search/%s",
            "soundcloud:search": "https://soundcloud.com/search?q=%s",
            "vimeo:search": "https://vimeo.com/search?q=%s",
            "dailymotion:search": "https://www.dailymotion.com/search/%s",
            "tiktok:search": "https://www.tiktok.com/search?q=%s",

            // Social
            "twitter:search": "https://twitter.com/search?q=%s",
            "reddit:search": "https://www.reddit.com/search/?q=%s",
            "reddit:sub": "https://www.reddit.com/r/%s",
            "instagram:user": "https://www.instagram.com/%s",
            "facebook:search": "https://www.facebook.com/search/top?q=%s",
            "pinterest:search": "https://www.pinterest.com/search/pins/?q=%s",
            "tumblr:search": "https://www.tumblr.com/search/%s",
            "linkedin:search": "https://www.linkedin.com/search/results/all/?keywords=%s",

            // Developers
            "github:search": "https://github.com/search?q=%s",
            "github:user": "https://github.com/%s",
            "stackoverflow:search": "https://stackoverflow.com/search?q=%s",
            "npm:search": "https://www.npmjs.com/search?q=%s",
            "pypi:search": "https://pypi.org/search/?q=%s",
            "docker:search": "https://hub.docker.com/search?q=%s",
            "mdn:search": "https://developer.mozilla.org/en-US/search?q=%s",
            "codepen:search": "https://codepen.io/search/pens?q=%s",

            // Knowledge / Info
            "wiki:search": "https://en.wikipedia.org/wiki/Special:Search?search=%s",
            "wolfram:solve": "https://www.wolframalpha.com/input/?i=%s",
            "imdb:search": "https://www.imdb.com/find?q=%s",
            "urban:define": "https://www.urbandictionary.com/define.php?term=%s",
            "bible:search": "https://www.biblegateway.com/quicksearch/?quicksearch=%s",
            "nasa:search": "https://images.nasa.gov/search-results?q=%s",
            "archive:search": "https://archive.org/search.php?query=%s",

            // Shopping
            "amazon:search": "https://www.amazon.com/s?k=%s",
            "ebay:search": "https://www.ebay.com/sch/i.html?_nkw=%s",
            "walmart:search": "https://www.walmart.com/search?q=%s",
            "etsy:search": "https://www.etsy.com/search?q=%s",
            "bestbuy:search": "https://www.bestbuy.com/site/searchpage.jsp?st=%s",
            "target:search": "https://www.target.com/s?searchTerm=%s",
            "aliexpress:search": "https://www.aliexpress.com/wholesale?SearchText=%s",

            // Tech News
            "hackernews:search": "https://hn.algolia.com/?q=%s",
            "techcrunch:search": "https://search.techcrunch.com/search?p=%s",
            "wired:search": "https://www.wired.com/search/?q=%s",
            "verge:search": "https://www.theverge.com/search?q=%s",

            // Gaming
            "steam:search": "https://store.steampowered.com/search/?term=%s",
            "ign:search": "https://www.ign.com/search?q=%s",
            "roblox:search": "https://www.roblox.com/discover/?Keyword=%s",
            "minecraft:wiki": "https://minecraft.fandom.com/wiki/Special:Search?query=%s",
            "twitch:channel": "https://www.twitch.tv/%s",

            // Images/Art
            "imgur:search": "https://imgur.com/search?q=%s",
            "unsplash:search": "https://unsplash.com/s/photos/%s",
            "deviantart:search": "https://www.deviantart.com/search?q=%s",
            "flickr:search": "https://www.flickr.com/search/?text=%s",
            "giphy:search": "https://giphy.com/search/%s",

            // Travel
            "maps:place": "https://www.google.com/maps/place/%s",
            "airbnb:search": "https://www.airbnb.com/s/%s/homes",
            "tripadvisor:search": "https://www.tripadvisor.com/Search?q=%s",

            // Other
            "bing:search": "https://www.bing.com/search?q=%s",
            "duckduckgo:search": "https://duckduckgo.com/?q=%s",
            "yahoo:search": "https://search.yahoo.com/search?p=%s",
            "weather:check": "https://www.weather.com/weather/today/l/%s"
        };

        // --- SYSTEM COMMANDS ---
        function executeSystemCommand(cmd, arg) {
            switch(cmd) {
                // Visuals
                case 'matrix:red':
                    terminalBody.className = 'color-red';
                    printLog("System Alert Level: CRITICAL (Red Mode Active)");
                    return true;
                case 'matrix:blue':
                    terminalBody.className = 'color-blue';
                    printLog("System Status: STABLE (Blue Mode Active)");
                    return true;
                case 'matrix:white':
                    terminalBody.className = 'color-white';
                    printLog("High Contrast Mode Enabled");
                    return true;
                case 'matrix:gold':
                    terminalBody.className = 'color-gold';
                    printLog("Admin Privilege Mode Visuals Enabled");
                    return true;
                case 'matrix:reset':
                    terminalBody.className = 'color-green';
                    printLog("Visuals reset to default.");
                    return true;
                case 'clear':
                    logDisplay.innerHTML = "";
                    return true;
                
                // Utilities
                case 'calc':
                    try {
                        // Safe math evaluation using Function constructor with restrictions
                        // Removing anything that isn't a number or math operator
                        if (/[^0-9+\-*/(). ]/.test(arg)) {
                            printLog("Error: Invalid characters in calculation.", "cmd-error");
                        } else {
                            const result = new Function('return ' + arg)();
                            printLog(`Result: ${result}`);
                        }
                    } catch (e) { printLog("Math Error.", "cmd-error"); }
                    return true;
                
                case 'system:time':
                    printLog(`Current System Time: ${new Date().toLocaleTimeString()}`);
                    return true;
                
                case 'system:date':
                    printLog(`Current System Date: ${new Date().toLocaleDateString()}`);
                    return true;

                case 'echo':
                    printLog(arg);
                    return true;

                case 'help':
                    printLog("--- COMMAND DATABASE [PARTIAL] ---");
                    printLog("SYNTAX: Category:Action(\"query\")");
                    printLog("EXAMPLES:");
                    printLog("  Youtube:Search(\"lofi hip hop\")");
                    printLog("  Google:Images(\"cyberpunk city\")");
                    printLog("  Github:Search(\"python scripts\")");
                    printLog("  Wolfram:Solve(\"integrate x^2\")");
                    printLog("  System:Time");
                    printLog("  Calc(\"50 * 25\")");
                    printLog("  Matrix:Red / Matrix:Blue / Matrix:Reset");
                    printLog("  Clear");
                    printLog("... Over 100 commands loaded in registry.");
                    return true;

                default:
                    return false;
            }
        }

        // --- MAIN PARSER ---
        cmdInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const rawInput = cmdInput.value.trim();
                cmdInput.value = '';
                
                if(!rawInput) return;

                printLog(`User: ${rawInput}`, "cmd-info");

                // Parse standard "Category:Action("Arg")" format
                // Regex looks for:  CommandName  ( " Argument " )
                const complexMatch = rawInput.match(/^([a-zA-Z0-9:]+)\s*\(\s*["'](.+)["']\s*\)$/);
                
                // Parse simple "Command" format (no args)
                const simpleMatch = rawInput.match(/^([a-zA-Z0-9:]+)$/);

                let commandKey = "";
                let argument = "";

                if (complexMatch) {
                    commandKey = complexMatch[1].toLowerCase();
                    argument = complexMatch[2];
                } else if (simpleMatch) {
                    commandKey = simpleMatch[1].toLowerCase();
                } else {
                    // Fallback: allow space separation for easier typing? 
                    // Let's stick to strict mode first, but maybe add a basic fallback
                    // for commands like "help".
                    commandKey = rawInput.toLowerCase();
                }

                // 1. Check System Commands first
                if (executeSystemCommand(commandKey, argument)) {
                    return;
                }

                // 2. Check URL Commands
                if (urlCommands[commandKey]) {
                    if (!argument) {
                        printLog(`Error: ${commandKey} requires an argument. e.g. ("query")`, "cmd-error");
                        return;
                    }
                    const finalUrl = urlCommands[commandKey].replace("%s", encodeURIComponent(argument));
                    printLog(`Executing protocol: ${commandKey}...`);
                    window.open(finalUrl, '_blank');
                } else {
                    printLog(`Error: Command '${commandKey}' not found. Check syntax.`, "cmd-error");
                }
            }
        });

        // Focus input on click anywhere
        document.addEventListener('click', () => cmdInput.focus());

    </script>
</body>
</html>
